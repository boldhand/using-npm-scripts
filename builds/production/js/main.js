"use strict";function createSearchResult(e){var t=document.getElementById("history"),a=document.createElement("li"),n=document.createElement("h2");n.innerText=e,a.appendChild(n),a.appendChild(dateStamp()),a.appendChild(createRemoveButton()),t.appendChild(a)}function clearUpdate(){for(var e=document.getElementById("update");e.firstChild;)e.removeChild(e.firstChild)}function emptyInput(){var e=document.getElementById("search");e.value=""}function timeStampHistory(){var e=new Date,t=(e.getDate()<10?"0":"")+e.getDate(),a=(e.getMonth()+1<10?"0":"")+(e.getMonth()+1),n=e.getFullYear(),r=(e.getHours()<10?"0":"")+e.getHours(),c=(e.getMinutes()<10?"0":"")+e.getMinutes();return n+"-"+a+"-"+t+" "+r+":"+c}function dateStamp(){var e=document.createElement("time");return e.innerText=timeStampHistory(),e}function createRemoveButton(){var e=document.createElement("button");return e.className="remove-item",e.addEventListener("click",function(e){e.target.parentNode.remove()}),e}var search=document.getElementById("search");search.addEventListener("keyup",function(){function e(e,t){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse(this.responseText);t&&t(e)}},a.open("GET",e,!0),a.send()}if(!this.value.trim())return void clearUpdate();var t=document.getElementById("search").value,a=new RegExp(t,"i");e("https://restcountries.eu/rest/v1",function(e){var t='<ul id="searchresults">';$.each(e,function(e,n){(-1!=n.name.search(a)||-1!=n.capital.search(a))&&(t+='<li tabindex="1">',t+=n.name+", "+n.capital,t+="</li>")}),t+="</ul>",$("#update").html(t)})});var update=document.getElementById("update");update.addEventListener("click",function(e){if(e.target&&"LI"==e.target.nodeName){var t=e.target.innerText;createSearchResult(t),clearUpdate(),emptyInput()}});var search=document.getElementById("search");search.addEventListener("keydown",function(e){if(13==e.keyCode){var t=search.value;search.value&&(createSearchResult(t),clearUpdate(),emptyInput())}});